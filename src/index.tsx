const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Profiles-xbkp2nvu.js","assets/vendor-ui-B3Q904Bv.js","assets/vendor-router-DU7qKgXk.js","assets/vendor-supabase-lHDrsOcV.js","assets/Home-C6YIrZ2t.js","assets/MediaRow-CrNyJ86B.js","assets/MediaCard-X_P_LWOG.js","assets/tmdb-CkxihBdw.js","assets/userService-CxaEte-k.js","assets/StreamingPlatforms-Bo1HQXWc.js","assets/Movies-DST92C0L.js","assets/Series-BTrvRjVf.js","assets/Kids-BHcgRO6g.js","assets/MyList-BYziRIhD.js","assets/LiveTV-D1tqHvT7.js","assets/Details-D0xZbV9t.js","assets/GlassPanel-Bu2UAB-9.js","assets/Player-L2g1hAFf.js","assets/Settings-B1bvAbWA.js","assets/Search-CFn_IE-_.js","assets/Dashboard-CisfteN2.js","assets/AdminLayout-BdoV03A_.js","assets/adminService-I9bvT-6i.js","assets/vendor-charts-DZ-u3LpU.js","assets/Subscribers-BGjJtXK9.js","assets/Finance-bWY15LLV.js","assets/IPTV-4A3EyQYU.js","assets/VOD-DUas3Kpg.js","assets/Resellers-AvavvKEh.js","assets/Security-CQukJ4Qx.js","assets/Settings-COWylqCr.js","assets/CatalogControl-YhS4mwHo.js","assets/Ingestion-iYACR4VM.js","assets/StreamTester-DhbPVkiM.js","assets/P2PSettings-BFhQN31h.js"])))=>i.map(i=>d[i]);
import{g as e,a as t,j as r,M as n,L as a,E as s,b as o,A as i,c as l}from"./vendor-ui-B3Q904Bv.js";import{a as c,B as u,R as d,b as m,u as p}from"./vendor-router-DU7qKgXk.js";import{c as f}from"./vendor-supabase-lHDrsOcV.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var h,g={};const y=e(function(){if(h)return g;h=1;var e=c();return g.createRoot=e.createRoot,g.hydrateRoot=e.hydrateRoot,g}()),v={},_=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=r?.nonce||r?.getAttribute("nonce");n=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in v)return;v[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,a&&n.setAttribute("nonce",a),document.head.appendChild(n),t?new Promise((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})};var b=(e=>(e.LOGIN="LOGIN",e.PROFILES="PROFILES",e.PLANS="PLANS",e.HOME="HOME",e.MOVIES="MOVIES",e.SERIES="SERIES",e.LIVE="LIVE",e.MY_LIST="MY_LIST",e.KIDS="KIDS",e.DETAILS="DETAILS",e.PLAYER="PLAYER",e.SEARCH="SEARCH",e.ADMIN="ADMIN",e.SETTINGS="SETTINGS",e))(b||{});let x=null;function w(){return x||(x=new(window.AudioContext||window.webkitAudioContext)),"suspended"===x.state&&x.resume().catch(()=>{}),x}function E(){try{const e=w(),t=e.createOscillator(),r=e.createGain();t.connect(r),r.connect(e.destination),t.type="sine",t.frequency.setValueAtTime(880,e.currentTime),t.frequency.exponentialRampToValueAtTime(1200,e.currentTime+.03),r.gain.setValueAtTime(.06,e.currentTime),r.gain.exponentialRampToValueAtTime(.001,e.currentTime+.06),t.start(e.currentTime),t.stop(e.currentTime+.06)}catch{}}function S(){try{const e=w(),t=e.createOscillator(),r=e.createOscillator(),n=e.createGain();t.connect(n),r.connect(n),n.connect(e.destination),t.type="sine",t.frequency.setValueAtTime(523.25,e.currentTime),t.frequency.setValueAtTime(659.25,e.currentTime+.08),r.type="sine",r.frequency.setValueAtTime(659.25,e.currentTime),r.frequency.setValueAtTime(783.99,e.currentTime+.08),n.gain.setValueAtTime(.08,e.currentTime),n.gain.exponentialRampToValueAtTime(.001,e.currentTime+.18),t.start(e.currentTime),t.stop(e.currentTime+.18),r.start(e.currentTime),r.stop(e.currentTime+.18)}catch{}}function j(){try{const e=w(),t=e.createOscillator(),r=e.createGain();t.connect(r),r.connect(e.destination),t.type="sine",t.frequency.setValueAtTime(660,e.currentTime),t.frequency.exponentialRampToValueAtTime(330,e.currentTime+.12),r.gain.setValueAtTime(.06,e.currentTime),r.gain.exponentialRampToValueAtTime(.001,e.currentTime+.15),t.start(e.currentTime),t.stop(e.currentTime+.15)}catch{}}function k(){try{const e=w(),t=e.createOscillator(),r=e.createGain();t.connect(r),r.connect(e.destination),t.type="square",t.frequency.setValueAtTime(150,e.currentTime),r.gain.setValueAtTime(.04,e.currentTime),r.gain.exponentialRampToValueAtTime(.001,e.currentTime+.1),t.start(e.currentTime),t.stop(e.currentTime+.1)}catch{}}function A(){try{const e=w();"suspended"===e.state&&e.resume();const t=e.createOscillator(),r=e.createGain();r.gain.setValueAtTime(0,e.currentTime),t.connect(r),r.connect(e.destination),t.start(),t.stop(e.currentTime+.001)}catch{}}let T=0,I=0;function N(e){e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}),requestAnimationFrame(()=>{const t=e.getBoundingClientRect();t.top<48&&window.scrollBy({top:-(48-t.top),behavior:"smooth"}),t.bottom>window.innerHeight-48&&window.scrollBy({top:t.bottom-window.innerHeight+48,behavior:"smooth"})})}function R(e,t){const r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetLeft-r.width/2+n.width/2;e.scrollTo({left:Math.max(0,a),behavior:"smooth"})}const L=t.createContext({focusedRow:0,focusedCol:0,setPosition:()=>{},savePosition:()=>{},restorePosition:()=>{},setEnabled:()=>{},pushFocusTrap:()=>{},popFocusTrap:()=>{},nextFocusGroup:()=>{},prevFocusGroup:()=>{},skipToSection:()=>{},triggerRipple:()=>{},setCircularNav:()=>{},setCircularH:()=>{},setCircularV:()=>{},circularH:!1,circularV:!1,circularEnabled:!1,focusTrapDepth:0,focusToFirstRow:()=>{}}),P=()=>t.useContext(L);function C(e){const t=e||document,r=new Set;return t.querySelectorAll("[data-nav-row]").forEach(e=>{const t=parseInt(e.getAttribute("data-nav-row")||"-1");t>=0&&r.add(t)}),Array.from(r).sort((e,t)=>e-t)}function O(e,t){const r=(t||document).querySelector(`[data-nav-row="${e}"]`);return r?Array.from(r.querySelectorAll("[data-nav-item]")).sort((e,t)=>parseInt(e.getAttribute("data-nav-col")||"0")-parseInt(t.getAttribute("data-nav-col")||"0")):[]}function M(e,t,r){const n=r||document,a=t.indexOf(e),s=new Set;for(let i=Math.max(0,a-2);i<=Math.min(t.length-1,a+2);i++)s.add(t[i]);const o=[];return s.forEach(e=>{const t=n.querySelector(`[data-nav-row="${e}"]`);t&&t.querySelectorAll("[data-nav-item]").forEach(t=>{const r=t,n=parseInt(r.getAttribute("data-nav-col")||"0"),a=r.closest("[data-nav-group]")?.getAttribute("data-nav-group")||void 0;o.push({el:r,rect:r.getBoundingClientRect(),row:e,col:n,group:a})})}),o}function D(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}function $(e,t,r){const n=D(e);let a=null,s=1/0;for(const o of r){const r=D(o.rect),i=r.x-n.x,l=r.y-n.y;let c,u,d;switch(t){case"up":d=l<-5,c=Math.abs(l),u=Math.abs(i);break;case"down":d=l>5,c=Math.abs(l),u=Math.abs(i);break;case"left":d=i<-5,c=Math.abs(i),u=Math.abs(l);break;case"right":d=i>5,c=Math.abs(i),u=Math.abs(l)}if(!d)continue;let m=0;"up"===t||"down"===t?Math.max(e.left,o.rect.left)<Math.min(e.right,o.rect.right)&&(m=-50):Math.max(e.top,o.rect.top)<Math.min(e.bottom,o.rect.bottom)&&(m=-50);const p=1*c+2.5*u+m;p<s&&(s=p,a=o)}return a}function V(e){const t=e.getBoundingClientRect();if(0===t.width||0===t.height)return;const r=document.createElement("div");r.className="spatial-nav-ripple";const n=1.4*Math.max(t.width,t.height);r.style.width=`${n}px`,r.style.height=`${n}px`,r.style.left=t.width/2-n/2+"px",r.style.top=t.height/2-n/2+"px","static"===getComputedStyle(e).position&&(e.style.position="relative"),e.style.overflow="hidden",e.appendChild(r),r.addEventListener("animationend",()=>r.remove())}function B(e,t,r){const n=O(e,r);if(0===n.length){const n=(r||document).querySelector(`[data-nav-row="${e}"]`);return n&&(n.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{const n=O(e,r);if(n.length>0){const e=n[Math.max(0,Math.min(t,n.length-1))];if(e){e.focus({preventScroll:!0});const t=e.closest("[data-nav-scroll]");t&&R(t,e),N(e),V(e)}}},150)),t}const a=Math.max(0,Math.min(t,n.length-1)),s=n[a];if(s){s.focus({preventScroll:!0});const e=s.closest("[data-nav-scroll]");e&&R(e,s),N(s),V(s)}return a}const z=({children:e})=>{const n=t.useRef(0),a=t.useRef(0),s=t.useRef(!0),o=t.useRef({}),i=t.useRef({}),l=t.useRef([]),c=t.useRef(null),u=t.useRef(!1),d=t.useRef(!1),[m,p]=t.useState(0),[f,h]=t.useState(0),[g,y]=t.useState(!1),[v,_]=t.useState(!1),[b,x]=t.useState(0),w=g||v,N=t.useCallback(()=>{const e=l.current;return 0===e.length?null:document.getElementById(e[e.length-1].containerId)||null},[]),R=t.useCallback((e,t)=>{n.current=e,a.current=t,o.current[e]=t,p(e),h(t);const r=B(e,t,N());r!==t&&(a.current=r,h(r))},[N]),P=t.useCallback(e=>{i.current[e]={row:n.current,col:a.current}},[]),D=t.useCallback(e=>{const t=i.current[e];t&&(setTimeout(()=>R(t.row,t.col),200),delete i.current[e])},[R]),z=t.useCallback(e=>{s.current=e},[]),q=t.useCallback(e=>{const t=document.activeElement;l.current.push({containerId:e,previousFocus:{element:t,row:n.current,col:a.current,scrollTop:window.scrollY}}),x(l.current.length),requestAnimationFrame(()=>{const t=document.getElementById(e);if(!t)return;const r=C(t);if(r.length>0)n.current=r[0],a.current=0,p(r[0]),h(0),B(r[0],0,t);else{const e=t.querySelector("[data-nav-item], button, a, [tabindex]");e&&e.focus()}})},[]),F=t.useCallback(()=>{const e=l.current;if(0===e.length)return;const t=e.pop();x(e.length),requestAnimationFrame(()=>{const{element:e,row:r,col:s,scrollTop:o}=t.previousFocus;n.current=r,a.current=s,p(r),h(s),e&&document.contains(e)&&e.focus({preventScroll:!0}),window.scrollTo({top:o,behavior:"smooth"})})},[]),U=t.useCallback(()=>{const e=[];return document.querySelectorAll("[data-nav-group]").forEach(t=>{const r=t.getAttribute("data-nav-group");r&&!e.includes(r)&&e.push(r)}),e},[]),G=t.useCallback(e=>{c.current=e;const t=document.querySelector(`[data-nav-group="${e}"]`);if(!t)return;const r=t.querySelector("[data-nav-item]");if(!r)return;const n=r.closest("[data-nav-row]");if(!n)return;const a=parseInt(n.getAttribute("data-nav-row")||"0"),s=parseInt(r.getAttribute("data-nav-col")||"0");R(a,s),E()},[R]),Y=t.useCallback(()=>{const e=U();if(0===e.length)return;const t=c.current?e.indexOf(c.current):-1;G(e[(t+1)%e.length])},[U,G]),H=t.useCallback(()=>{const e=U();if(0===e.length)return;const t=c.current?e.indexOf(c.current):0;G(e[(t-1+e.length)%e.length])},[U,G]),J=t.useCallback(e=>{const t=document.getElementById(e);if(!t)return;const r=t.querySelectorAll("[data-nav-item]");if(r.length>0){const e=r[0].closest("[data-nav-row]");if(e){const t=parseInt(e.getAttribute("data-nav-row")||"0");R(t,0)}}t.scrollIntoView({behavior:"smooth",block:"start"}),E()},[R]),K=t.useCallback(e=>{V(e)},[]),W=t.useCallback(e=>{u.current=e,y(e)},[]),Z=t.useCallback(e=>{d.current=e,_(e)},[]),X=t.useCallback(e=>{W(e),Z(e)},[W,Z]);t.useEffect(()=>{let e=!1;const t=t=>{if(!s.current)return;if("ArrowUp"===t.key||"ArrowDown"===t.key?!function(){const e=Date.now();return!(e-I<220||(I=e,T=e,0))}():!function(){const e=Date.now();return!(e-T<120||(T=e,0))}())return;e||(A(),e=!0);const r=t.target?.tagName;if("INPUT"===r||"TEXTAREA"===r||"SELECT"===r)return;if("Tab"===t.key&&U().length>1)return t.preventDefault(),void(t.shiftKey?H():Y());const i=N(),c=C(i);if(0===c.length)return;const m=n.current,p=a.current,f=c.indexOf(m);if(t.key>="1"&&t.key<="9"){const e=parseInt(t.key,10),r=O(m,i),n=e-1;return void(n>=0&&r.length>n&&(t.preventDefault(),R(m,n),E()))}const h=function(e,t){const r=(t||document).querySelector(`[data-nav-row="${e}"]`);if(!r)return{};const n=r.getAttribute("data-nav-wrap");if("true"===n||""===n)return{h:!0,v:!0};if("false"===n)return{h:!1,v:!1};const a=r.getAttribute("data-nav-wrap-h"),s=r.getAttribute("data-nav-wrap-v");return{h:"true"===a||""===a||"false"!==a&&void 0,v:"true"===s||""===s||"false"!==s&&void 0}}(m,i),g=h.h??u.current,y=h.v??d.current;switch(t.key){case"ArrowUp":if(t.preventDefault(),f>0){const e=c[f-1];R(e,o.current[e]??p),E()}else if(y&&0===f){const e=c[c.length-1];R(e,o.current[e]??p),E()}else if(-1===f&&c.length>0)R(c[0],0),E();else{const e=M(m,c,i),t=O(m,i),r=t[Math.min(p,t.length-1)];if(r){const t=$(r.getBoundingClientRect(),"up",e.filter(e=>e.el!==r));t?(R(t.row,t.col),E()):k()}}break;case"ArrowDown":if(t.preventDefault(),f>=0&&f<c.length-1){const e=c[f+1];R(e,o.current[e]??p),E()}else if(y&&f===c.length-1){const e=c[0];R(e,o.current[e]??p),E()}else if(-1===f&&c.length>0)R(c[0],0),E();else{const e=M(m,c,i),t=O(m,i),r=t[Math.min(p,t.length-1)];if(r){const t=$(r.getBoundingClientRect(),"down",e.filter(e=>e.el!==r));t?(R(t.row,t.col),E()):k()}}break;case"ArrowLeft":{t.preventDefault();const e=O(m,i);if(p>0)R(m,p-1),E();else if(g&&e.length>0)R(m,e.length-1),E();else{const t=M(m,c,i),r=e[0];if(r){const e=$(r.getBoundingClientRect(),"left",t.filter(e=>e.el!==r));e?(R(e.row,e.col),E()):k()}}break}case"ArrowRight":{t.preventDefault();const e=O(m,i);if(p<e.length-1)R(m,p+1),E();else if(g&&e.length>0)R(m,0),E();else{const t=M(m,c,i),r=e[e.length-1];if(r){const e=$(r.getBoundingClientRect(),"right",t.filter(e=>e.el!==r));e?(R(e.row,e.col),E()):k()}}break}case"Enter":S();break;case"Escape":case"Backspace":l.current.length>0&&(t.preventDefault(),t.stopPropagation(),F(),j())}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[R,N,U,Y,H,F]),t.useEffect(()=>{const e=()=>{if(i.current.__initial_done)return;const e=C();if(0===e.length)return;const t=document.activeElement;t?.hasAttribute("data-nav-item")||(R(e[0],0),i.current.__initial_done={row:-1,col:-1})},t=setTimeout(e,200),r=setTimeout(e,600),n=setTimeout(e,1200);return()=>{clearTimeout(t),clearTimeout(r),clearTimeout(n)}},[R]),t.useEffect(()=>{const e=()=>{const e=document.activeElement;e?.hasAttribute("data-nav-item")};return window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e,{passive:!0}),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]);const Q=t.useCallback(()=>{delete i.current.__initial_done,requestAnimationFrame(()=>{const e=C(N());e.length>0&&R(e[0],0)})},[N,R]);return t.useEffect(()=>()=>{},[]),r.jsx(L.Provider,{value:{focusedRow:m,focusedCol:f,setPosition:R,savePosition:P,restorePosition:D,setEnabled:z,pushFocusTrap:q,popFocusTrap:F,nextFocusGroup:Y,prevFocusGroup:H,skipToSection:J,triggerRipple:K,setCircularNav:X,setCircularH:W,setCircularV:Z,circularH:g,circularV:v,circularEnabled:w,focusTrapDepth:b,focusToFirstRow:Q},children:e})},q={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVnam55bGhtamt5YWdueXh2ZW5rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA4MzQ3NzQsImV4cCI6MjA4NjQxMDc3NH0.mdOKBeWqROvllIugrvf4YxrHxq2_zP8M4jg6ovndimc",VITE_SUPABASE_URL:"https://ugjnylhmjkyagnyxvenk.supabase.co",VITE_TMDB_API_KEY:"ddb1bdf6aa91bdf335797853884b0c1d",VITE_TMDB_READ_TOKEN:"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkZGIxYmRmNmFhOTFiZGYzMzU3OTc4NTM4ODRiMGMxZCIsIm5iZiI6MTc1NzgyNzc4NS42NTI5OTk5LCJzdWIiOiI2OGM2NTJjOWExMzU0OWNiMTljOGZkNTQiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.MRN49ZNLLIcrO-jeU9lcJUetiI8fZ5rkJl0a81RAb5U"},F=e=>{if(void 0!==import.meta&&q)for(const t of e)if(q[t])return q[t]},U=F(["VITE_SUPABASE_URL"]),G=F(["VITE_SUPABASE_ANON_KEY"]);if(!U||!G)throw new Error(`Supabase: variáveis de ambiente ausentes. Defina VITE_SUPABASE_URL e VITE_SUPABASE_ANON_KEY no seu .env\nEncontradas: SUPABASE_URL=${Boolean(U)}, SUPABASE_ANON_KEY=${Boolean(G)}`);const Y=(()=>{if("undefined"!=typeof globalThis&&globalThis.__supabase_client__)return globalThis.__supabase_client__;const e=f(U,G,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1,storageKey:"redx-auth"}});return"undefined"!=typeof globalThis&&(globalThis.__supabase_client__=e),e})();async function H(e,t="created_at",r="id, tmdb_id, title, poster, backdrop, logo_url, year, rating, genre, stream_url, trailer_url, use_trailer, platform, status, created_at"){const n=1e3,a=[];let s=0;for(;;){const{data:o,error:i}=await Y.from(e).select(r).order(t,{ascending:!1}).range(s,s+n-1);if(i)throw i;if(!o||0===o.length)break;if(a.push(...o),o.length<n)break;s+=n}return a}async function J(){return H("movies")}async function K(){return H("series")}async function W(){let{data:e,error:t}=await Y.from("channels").select("id, name, logo, category, stream_url, number, is_premium").order("name",{ascending:!0});if(t){const t=await Y.from("channels").select("id, name, logo, category, stream_url, number, is_premium").order("nome",{ascending:!0});if(t.error)throw t.error;e=t.data}return e||[]}async function Z(e){const{data:t,error:r}=await Y.from("user_settings").select("*").eq("user_id",e).maybeSingle();if(r)throw r;return t}async function X(e){const{data:t,error:r}=await Y.from("user_subscriptions").select("*, plan:plans(*)").eq("user_id",e).maybeSingle();if(r)throw r;return t}async function Q(e){const{data:t,error:r}=await Y.from("payment_methods").select("*").eq("user_id",e);if(r)throw r;return t||[]}async function ee(e){const{data:t,error:r}=await Y.from("devices").select("*").eq("user_id",e);if(r)throw r;return t||[]}async function te(e){const{data:t,error:r}=await Y.from("devices").insert(e).select().maybeSingle();if(r)throw r;return t}async function re(e){const{error:t}=await Y.from("devices").delete().eq("id",e);if(t)throw t}async function ne(e){const{data:t,error:r}=await Y.from("user_profiles").select("*").eq("user_id",e);if(r)throw r;return t||[]}async function ae(e){const{data:t,error:r}=await Y.from("user_profiles").insert(e).select().maybeSingle();if(r)throw r;return t}Y.auth.onAuthStateChange((e,t)=>{});const se=new Set(["title","description","poster","backdrop","logo_url","stream_url","year","genre","rating","duration","tmdb_id","stars","trailer_key","trailer_url","use_trailer","platform","status","original_title"]),oe=new Set(["title","description","poster","backdrop","logo_url","year","genre","rating","seasons","tmdb_id","stars","trailer_key","trailer_url","use_trailer","platform","status","original_title"]);function ie(e,t){const r={};for(const[n,a]of Object.entries(e))t.has(n)&&void 0!==a&&""!==a&&(r[n]=a);return r}async function le(e){const t=ie(e,se),{data:r,error:n}=await Y.from("movies").insert(t).select().maybeSingle();return n?(console.error("Erro ao inserir filme:",n),null):r}async function ce(e){const t=ie(e,oe),{data:r,error:n}=await Y.from("series").insert(t).select().maybeSingle();return n?(console.error("Erro ao inserir série:",n),null):r}async function ue(e,t){const r=ie(t,se),{data:n,error:a}=await Y.from("movies").update(r).eq("id",e).select().maybeSingle();return a?(console.error("Erro ao atualizar filme:",a),null):n}async function de(e,t){const r=ie(t,oe),{data:n,error:a}=await Y.from("series").update(r).eq("id",e).select().maybeSingle();return a?(console.error("Erro ao atualizar série:",a),null):n}async function me(e){const{error:t}=await Y.from("movies").delete().eq("id",e);return!t||(console.error("Erro ao deletar filme:",t),!1)}async function pe(e){const{error:t}=await Y.from("series").delete().eq("id",e);return!t||(console.error("Erro ao deletar série:",t),!1)}async function fe(e,t="posters"){if("undefined"==typeof window&&!(e instanceof globalThis.File))throw new Error("uploadImage deve ser chamado do cliente com um objeto File (browser). Para uploads server-side use uma API route/Edge Function com SERVICE_ROLE.");const r=e.name.split(".").pop(),n=`${Date.now()}_${Math.random().toString(36).substring(7)}.${r}`,{error:a}=await Y.storage.from(t).upload(n,e);if(a)return console.error(`Erro ao fazer upload para ${t}:`,a),null;const{data:s}=Y.storage.from(t).getPublicUrl(n);return s.publicUrl}async function he(){const{data:e,error:t}=await Y.from("plans").select("*").order("price",{ascending:!0});return t?[{id:"1",name:"Básico",price:29.9,description:"Para começar",features:["HD","1 Tela","Anúncios"],active:!0},{id:"2",name:"Padrão",price:49.9,description:"Melhor custo-benefício",features:["Full HD","2 Telas","Sem Anúncios"],active:!0},{id:"3",name:"Premium",price:69.9,description:"Experiência máxima",features:["4K HDR","4 Telas","Áudio Espacial"],active:!0}]:e}async function ge(e){const{data:t,error:r}=await Y.from("plans").upsert(e).select().single();return r?(console.error("Erro ao salvar plano:",r),null):t}async function ye(e){const{error:t}=await Y.from("plans").delete().eq("id",e);if(t)throw t;return!0}async function ve(){const{data:e,error:t}=await Y.from("payment_settings").select("*").single();return t||!e?{id:"default",pix_key:"",pix_name:"",instructions:"Envie o comprovante para o suporte."}:e}async function _e(e){const{data:t,error:r}=await Y.from("payment_settings").select("id").single();let n;return r&&"PGRST116"!==r.code&&console.error("Erro ao verificar payment_settings:",r),n=t&&t.id?await Y.from("payment_settings").update(e).eq("id",t.id).select().single():await Y.from("payment_settings").insert(e).select().single(),n.error?(console.error("Erro ao salvar dados bancários:",n.error),null):n.data||n}async function be(e){try{const{error:t}=await Y.from("media_image_updates").insert(e);return!t}catch(t){return!1}}async function xe(e=1,t=50,r){let n=Y.from("movies").select("*",{count:"exact"}).or("status.eq.published,status.is.null");r?.minYear&&(n=n.or(`year.gte.${r.minYear},year.is.null`)),r?.maxYear&&(n=n.lte("year",r.maxYear)),r?.genres&&r.genres.length>0&&(n=n.overlaps("genre",r.genres));const a=(e-1)*t,s=a+t-1;n=n.order("created_at",{ascending:!1}).range(a,s);const{data:o,error:i,count:l}=await n;if(i)throw i;const c=l||0;return{data:o||[],total:c,page:e,limit:t,totalPages:Math.ceil(c/t)}}async function we(e=1,t=50,r){let n=Y.from("series").select("*",{count:"exact"}).or("status.eq.published,status.is.null");r?.minYear&&(n=n.or(`year.gte.${r.minYear},year.is.null`)),r?.maxYear&&(n=n.lte("year",r.maxYear)),r?.genres&&r.genres.length>0&&(n=n.overlaps("genre",r.genres));const a=(e-1)*t,s=a+t-1;n=n.order("created_at",{ascending:!1}).range(a,s);const{data:o,error:i,count:l}=await n;if(i)throw i;const c=l||0;return{data:o||[],total:c,page:e,limit:t,totalPages:Math.ceil(c/t)}}async function Ee(e){const t={...e,minYear:e?.minYear||2018},[r,n]=await Promise.all([xe(1,1e3,t),we(1,1e3,t)]);let a=r.data,s=n.data;if(r.totalPages>1){const e=Array.from({length:r.totalPages-1},(e,t)=>t+2);(await Promise.all(e.map(e=>xe(e,1e3,t)))).forEach(e=>{a=[...a,...e.data]})}if(n.totalPages>1){const e=Array.from({length:n.totalPages-1},(e,t)=>t+2);(await Promise.all(e.map(e=>we(e,1e3,t)))).forEach(e=>{s=[...s,...e.data]})}return a.length,s.length,t.minYear,{movies:a,series:s}}const Se=t.createContext({user:null,session:null,isAdmin:!1,loading:!0,signIn:async()=>({error:null}),signUp:async()=>({error:null}),signOut:async()=>{}}),je=()=>t.useContext(Se),ke=({children:e})=>{const[n,a]=t.useState(null),[s,o]=t.useState(null),[i,l]=t.useState(!1),[c,u]=t.useState(!0),d=e=>{const t=e?.user?.app_metadata?.role;return"admin"===t};return t.useEffect(()=>{Y.auth.getSession().then(({data:{session:e}})=>{o(e),a(e?.user??null),l(d(e)),u(!1)});const{data:{subscription:e}}=Y.auth.onAuthStateChange((e,t)=>{o(t),a(t?.user??null),l(d(t)),u(!1)});return()=>e.unsubscribe()},[]),r.jsx(Se.Provider,{value:{user:n,session:s,isAdmin:i,loading:c,signIn:async(e,t)=>{try{u(!0);const{data:r,error:n}=await Y.auth.signInWithPassword({email:e,password:t});return n?(console.error("Login error:",n.message),u(!1),{error:n.message}):r.session?(o(r.session),a(r.session.user),l(d(r.session)),u(!1),{error:null}):(u(!1),{error:"Sessão não criada"})}catch(r){return u(!1),{error:"Erro inesperado"}}},signUp:async(e,t)=>{try{u(!0);const{error:r}=await Y.auth.signUp({email:e,password:t});return u(!1),r?{error:r.message}:{error:null}}catch(r){return u(!1),{error:"Erro inesperado no cadastro"}}},signOut:async()=>{try{await Y.auth.signOut()}catch(e){console.error("Erro ao fazer logout:",e)}finally{a(null),o(null),l(!1)}}},children:e})},Ae=({onLogin:e,onAdminAccess:l})=>{const[c,u]=t.useState(!1),[d,m]=t.useState(""),[p,f]=t.useState(""),{setPosition:h}=P(),{signIn:g}=je(),[y,v]=t.useState(null),[_,b]=t.useState(!1);return r.jsx("div",{className:"fixed inset-0 bg-[radial-gradient(circle_at_top_left,_#990000_0%,_#000000_70%)] flex items-center justify-center overflow-hidden font-sans","data-nav-row":"0",children:r.jsx("div",{className:"relative z-10 w-full max-w-[350px] px-4",children:r.jsxs("div",{className:"bg-white/10 backdrop-blur-[15px] border border-white/10 p-8 rounded-[20px] shadow-[0_20px_50px_rgba(0,0,0,0.5)] aspect-square flex flex-col justify-between",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[r.jsx("div",{className:"bg-[#E50914] p-1.5 rounded-lg",children:r.jsx("div",{className:"w-0 h-0 border-t-[6px] border-t-transparent border-l-[10px] border-l-white border-b-[6px] border-b-transparent ml-0.5"})}),r.jsx("h1",{className:"text-2xl font-black tracking-tighter text-white",children:"RedFlix"})]}),r.jsxs("form",{onSubmit:async t=>{t.preventDefault(),v(null),b(!0);try{const{error:t}=await g(d,p);t?(v("Falha ao entrar: "+t),b(!1)):(b(!1),e())}catch(r){v("Erro de conexão"),b(!1)}},className:"space-y-4",children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-[10px] uppercase font-black text-[#E50914] tracking-widest ml-4",children:"E-mail"}),r.jsxs("div",{className:"relative group",children:[r.jsx(n,{size:18,className:"absolute left-5 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-white transition-colors"}),r.jsx("input",{type:"email",value:d,onChange:e=>m(e.target.value),onKeyDown:e=>{"ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&"Backspace"!==e.key&&"Enter"!==e.key&&("ArrowDown"===e.key&&(e.preventDefault(),h(0,1),document.querySelector('[data-nav-col="1"]')?.focus()),"ArrowUp"===e.key&&e.preventDefault())},onFocus:()=>h(0,0),placeholder:"seuemail@exemplo.com",className:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 pl-12 pr-5 text-sm focus:outline-none focus:border-white/20 focus:bg-white/10 transition-all text-white placeholder-white/20","data-nav-item":!0,"data-nav-col":"0"})]})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-[10px] uppercase font-black text-[#E50914] tracking-widest ml-4",children:"Senha"}),r.jsxs("div",{className:"relative group",children:[r.jsx(a,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-white transition-colors"}),r.jsx("input",{type:c?"text":"password",value:p,onChange:e=>f(e.target.value),onKeyDown:e=>{"ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&"Backspace"!==e.key&&"Enter"!==e.key&&("ArrowUp"===e.key&&(e.preventDefault(),h(0,0),document.querySelector('[data-nav-col="0"]')?.focus()),"ArrowDown"===e.key&&(e.preventDefault(),h(0,2),document.getElementById("login-submit")?.focus()))},onFocus:()=>h(0,1),placeholder:"••••••••",className:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 pl-12 pr-12 text-sm focus:outline-none focus:border-white/20 focus:bg-white/10 transition-all text-white placeholder-white/20","data-nav-item":!0,"data-nav-col":"1"}),r.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white transition-colors","aria-label":c?"Hide password":"Show password",title:c?"Hide password":"Show password",children:c?r.jsx(s,{size:18}):r.jsx(o,{size:18})})]})]}),r.jsxs("div",{className:"flex items-center justify-between px-1",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[r.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-white/10 bg-white/5 accent-[#E50914]"}),r.jsx("span",{className:"text-xs text-gray-400 group-hover:text-white transition-colors",children:"Lembrar-me"})]}),r.jsx("button",{type:"button",className:"text-xs text-gray-400 hover:text-white transition-colors",children:"Esqueceu a senha?"})]}),r.jsxs("button",{id:"login-submit",type:"submit",tabIndex:0,onKeyDown:e=>{"ArrowUp"===e.key&&(e.preventDefault(),h(0,1)),"Enter"===e.key&&(e.preventDefault(),e.currentTarget.click())},className:"w-full bg-linear-to-r from-[#E50914] to-[#b20710] py-3 rounded-2xl font-bold flex items-center justify-center gap-3 hover:scale-[1.02] active:scale-95 transition-all shadow-xl shadow-red-900/20 group","data-nav-item":!0,"data-nav-col":"2",children:["Entrar ",r.jsx(i,{size:18,className:"group-hover:translate-x-1 transition-transform"})]})]}),r.jsxs("div",{className:"mt-4 text-center",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:["Novo por aqui? ",r.jsx("button",{className:"text-[#E50914] font-bold hover:underline",children:"Criar conta"})]}),r.jsx("button",{type:"button",onClick:()=>l?.(),className:"mt-4 text-[10px] text-white/20 hover:text-white/60 transition-colors uppercase tracking-widest font-bold",children:"Acesso Admin"})]})]})})})};var Te,Ie,Ne,Re,Le={exports:{}},Pe={},Ce={exports:{}},Oe={};function Me(){if(Te)return Oe;Te=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),i=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator,m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,f={};function h(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||m}function g(){}function y(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||m}h.prototype.isReactComponent={},h.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},h.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=h.prototype;var v=y.prototype=new g;v.constructor=y,p(v,h.prototype),v.isPureReactComponent=!0;var _=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},w={key:!0,ref:!0,__self:!0,__source:!0};function E(t,r,n){var a,s={},o=null,i=null;if(null!=r)for(a in void 0!==r.ref&&(i=r.ref),void 0!==r.key&&(o=""+r.key),r)b.call(r,a)&&!w.hasOwnProperty(a)&&(s[a]=r[a]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(a in l=t.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:e,type:t,key:o,ref:i,props:s,_owner:x.current}}function S(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var j=/\/+/g;function k(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(r,n,a,s,o){var i=typeof r;"undefined"!==i&&"boolean"!==i||(r=null);var l=!1;if(null===r)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(r.$$typeof){case e:case t:l=!0}}if(l)return o=o(l=r),r=""===s?"."+k(l,0):s,_(o)?(a="",null!=r&&(a=r.replace(j,"$&/")+"/"),A(o,n,a,"",function(e){return e})):null!=o&&(S(o)&&(o=function(t,r){return{$$typeof:e,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}(o,a+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(j,"$&/")+"/")+r)),n.push(o)),1;if(l=0,s=""===s?".":s+":",_(r))for(var c=0;c<r.length;c++){var u=s+k(i=r[c],c);l+=A(i,n,a,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(r),"function"==typeof u)for(r=u.call(r),c=0;!(i=r.next()).done;)l+=A(i=i.value,n,a,u=s+k(i,c++),o);else if("object"===i)throw n=String(r),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(r).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,r){if(null==e)return e;var n=[],a=0;return A(e,n,"","",function(e){return t.call(r,e,a++)}),n}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},R={transition:null},L={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:R,ReactCurrentOwner:x};function P(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:T,forEach:function(e,t,r){T(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},Oe.Component=h,Oe.Fragment=r,Oe.Profiler=a,Oe.PureComponent=y,Oe.StrictMode=n,Oe.Suspense=l,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,Oe.act=P,Oe.cloneElement=function(t,r,n){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=p({},t.props),s=t.key,o=t.ref,i=t._owner;if(null!=r){if(void 0!==r.ref&&(o=r.ref,i=x.current),void 0!==r.key&&(s=""+r.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in r)b.call(r,c)&&!w.hasOwnProperty(c)&&(a[c]=void 0===r[c]&&void 0!==l?l[c]:r[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:e,type:t.type,key:s,ref:o,props:a,_owner:i}},Oe.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},Oe.createElement=E,Oe.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(e){return{$$typeof:i,render:e}},Oe.isValidElement=S,Oe.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:I}},Oe.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},Oe.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},Oe.unstable_act=P,Oe.useCallback=function(e,t){return N.current.useCallback(e,t)},Oe.useContext=function(e){return N.current.useContext(e)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(e){return N.current.useDeferredValue(e)},Oe.useEffect=function(e,t){return N.current.useEffect(e,t)},Oe.useId=function(){return N.current.useId()},Oe.useImperativeHandle=function(e,t,r){return N.current.useImperativeHandle(e,t,r)},Oe.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},Oe.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},Oe.useMemo=function(e,t){return N.current.useMemo(e,t)},Oe.useReducer=function(e,t,r){return N.current.useReducer(e,t,r)},Oe.useRef=function(e){return N.current.useRef(e)},Oe.useState=function(e){return N.current.useState(e)},Oe.useSyncExternalStore=function(e,t,r){return N.current.useSyncExternalStore(e,t,r)},Oe.useTransition=function(){return N.current.useTransition()},Oe.version="18.3.1",Oe}function De(){return Ie||(Ie=1,Ce.exports=Me()),Ce.exports}
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $e=(Re||(Re=1,Le.exports=function(){if(Ne)return Pe;Ne=1;var e=De(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(e,r,o){var i,l={},c=null,u=null;for(i in void 0!==o&&(c=""+o),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(u=r.ref),r)n.call(r,i)&&!s.hasOwnProperty(i)&&(l[i]=r[i]);if(e&&e.defaultProps)for(i in r=e.defaultProps)void 0===l[i]&&(l[i]=r[i]);return{$$typeof:t,type:e,key:c,ref:u,props:l,_owner:a.current}}return Pe.Fragment=r,Pe.jsx=o,Pe.jsxs=o,Pe}()),Le.exports),Ve=De();const Be=e(Ve),ze=(...e)=>e.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),qe=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)};
/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Fe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},Ge=Ve.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...i},l)=>Ve.createElement("svg",{ref:l,...Fe,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:ze("lucide",a),...!s&&!Ue(i)&&{"aria-hidden":"true"},...i},[...o.map(([e,t])=>Ve.createElement(e,t)),...Array.isArray(s)?s:[s]])),Ye=(e,t)=>{const r=Ve.forwardRef(({className:r,...n},a)=>{return Ve.createElement(Ge,{ref:a,iconNode:t,className:ze(`lucide-${s=qe(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...n});var s});return r.displayName=qe(e),r},He=Ye("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Je=Ye("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),Ke=({currentPage:e,onNavigate:t,profile:r,onProfileClick:n})=>{const a=[{id:b.HOME,label:"Início"},{id:b.MOVIES,label:"Filmes"},{id:b.SERIES,label:"Séries"},{id:b.KIDS,label:"Kids"},{id:b.LIVE,label:"Canais"},{id:b.MY_LIST,label:"Minha Lista"}];return $e.jsxs("nav",{className:"flex items-center justify-between w-full","data-nav-row":0,children:[$e.jsxs("div",{className:"flex items-center gap-4",children:[$e.jsx("img",{src:"/logored.png",alt:"Redflix",className:"h-6 w-auto object-contain drop-shadow-md cursor-pointer hover:scale-105 transition-transform",onClick:()=>t(b.HOME)}),$e.jsx("div",{className:"flex items-center gap-6",children:a.map((r,n)=>$e.jsx("button",{onClick:()=>{S(),t(r.id)},className:"px-4 py-1 rounded-xl text-[15px] font-medium transition-all duration-200 outline-none\n                border border-transparent\n                focus:bg-white focus:text-black focus:scale-105\n                "+(e===r.id?"text-white font-bold":"text-gray-300 hover:text-white"),tabIndex:0,"data-nav-item":!0,"data-nav-col":n,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),S(),t(r.id))},children:r.label},r.id))})]}),$e.jsxs("div",{className:"flex items-center gap-6",children:[$e.jsx("button",{onClick:()=>{S(),t(b.SEARCH)},className:"text-gray-300 hover:text-white transition-colors outline-none focus:scale-110","aria-label":"Buscar","data-nav-item":!0,"data-nav-col":a.length,children:$e.jsx(He,{size:20})}),$e.jsx("button",{onClick:()=>{S(),n()},className:"w-8 h-8 rounded-full overflow-hidden border border-transparent hover:border-white transition-all focus:outline-none focus:ring-2 focus:ring-white","data-nav-item":!0,"data-nav-col":a.length+1,children:$e.jsx("img",{src:r?.avatar||"/logored.png",alt:r?.name||"Perfil",className:"w-full h-full object-cover"})})]})]})};
/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function We(){return We=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},We.apply(this,arguments)}var Ze,Xe,Qe,et;function tt(e,t){if(!1===e||null==e)throw new Error(t)}function rt(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function nt(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function at(e,t){let r=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function st(e,t,r,n){let a;void 0===n&&(n=!1),"string"==typeof e?a=rt(e):(a=We({},e),tt(!a.pathname||!a.pathname.includes("?"),nt("?","pathname","search",a)),tt(!a.pathname||!a.pathname.includes("#"),nt("#","pathname","hash",a)),tt(!a.search||!a.search.includes("#"),nt("#","search","hash",a)));let s,o=""===e||""===a.pathname,i=o?"/":a.pathname;if(null==i)s=r;else{let e=t.length-1;if(!n&&i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:a=""}="string"==typeof e?rt(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:ot(n),hash:it(a)}}(a,s),c=i&&"/"!==i&&i.endsWith("/"),u=(o||"."===i)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}(Xe=Ze||(Ze={})).Pop="POP",Xe.Push="PUSH",Xe.Replace="REPLACE",(et=Qe||(Qe={})).data="data",et.deferred="deferred",et.redirect="redirect",et.error="error";const ot=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",it=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"",lt=["post","put","patch","delete"];new Set(lt);const ct=["get",...lt];
/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function ut(){return ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ut.apply(this,arguments)}new Set(ct);const dt=Ve.createContext(null),mt=Ve.createContext(null),pt=Ve.createContext(null),ft=Ve.createContext({outlet:null,matches:[],isDataRoute:!1});function ht(){return null!=Ve.useContext(pt)}function gt(){return ht()||tt(!1),Ve.useContext(pt).location}function yt(e){Ve.useContext(mt).static||Ve.useLayoutEffect(e)}function vt(){let{isDataRoute:e}=Ve.useContext(ft);return e?function(){let{router:e}=function(){let e=Ve.useContext(dt);return e||tt(!1),e}(_t.UseNavigateStable),t=function(){let e=function(){let e=Ve.useContext(ft);return e||tt(!1),e}(),t=e.matches[e.matches.length-1];return t.route.id||tt(!1),t.route.id}(bt.UseNavigateStable),r=Ve.useRef(!1);return yt(()=>{r.current=!0}),Ve.useCallback(function(n,a){void 0===a&&(a={}),r.current&&("number"==typeof n?e.navigate(n):e.navigate(n,ut({fromRouteId:t},a)))},[e,t])}():function(){ht()||tt(!1);let e=Ve.useContext(dt),{basename:t,future:r,navigator:n}=Ve.useContext(mt),{matches:a}=Ve.useContext(ft),{pathname:s}=gt(),o=JSON.stringify(at(a,r.v7_relativeSplatPath)),i=Ve.useRef(!1);return yt(()=>{i.current=!0}),Ve.useCallback(function(r,a){if(void 0===a&&(a={}),!i.current)return;if("number"==typeof r)return void n.go(r);let l=st(r,JSON.parse(o),s,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:[t,l.pathname].join("/").replace(/\/\/+/g,"/")),(a.replace?n.replace:n.push)(l,a.state,a)},[t,n,o,s,e])}()}var _t=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(_t||{}),bt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(bt||{});function xt(e){let{to:t,replace:r,state:n,relative:a}=e;ht()||tt(!1);let{future:s,static:o}=Ve.useContext(mt),{matches:i}=Ve.useContext(ft),{pathname:l}=gt(),c=vt(),u=st(t,at(i,s.v7_relativeSplatPath),l,"path"===a),d=JSON.stringify(u);return Ve.useEffect(()=>c(JSON.parse(d),{replace:r,state:n,relative:a}),[c,d,a,r,n]),null}new Promise(()=>{});const wt=({children:e})=>{const{user:t,loading:r,isAdmin:n}=je(),[a,s]=Ve.useState(()=>"true"===sessionStorage.getItem("redx_admin_authenticated")),[o,i]=Ve.useState(""),[l,c]=Ve.useState(""),[u,d]=Ve.useState(!1);return r?$e.jsx("div",{className:"flex items-center justify-center h-screen bg-[#0B0B0F]",children:$e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-[#E50914]"})}):t?n?$e.jsx($e.Fragment,{children:e}):$e.jsx("div",{className:"min-h-screen bg-[#0B0B0F] flex items-center justify-center p-4",children:$e.jsxs("div",{className:"w-full max-w-md bg-[#121217] border border-red-600/30 rounded-2xl p-8 shadow-2xl text-center",children:[$e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[$e.jsx(Je,{size:18,className:"text-red-500"}),$e.jsx("h2",{className:"text-white font-bold",children:"Acesso negado"})]}),$e.jsxs("p",{className:"text-white/60 text-sm",children:["Sua conta não possui role ",$e.jsx("code",{children:"admin"})," em ",$e.jsx("code",{children:"app_metadata"}),"."]})]})}):$e.jsx(xt,{to:"/",replace:!0})},Et=["image/jpeg","image/png","image/webp","image/gif"],St=["bg-red-600","bg-blue-600","bg-green-600","bg-purple-600","bg-yellow-500","bg-pink-600","bg-cyan-500","bg-orange-500"],jt=[{label:"L",value:"L",level:0,color:"bg-green-500",description:"Livre para todas as idades"},{label:"10+",value:"10+",level:10,color:"bg-blue-500",description:"Não recomendado para menores de 10 anos"},{label:"12+",value:"12+",level:12,color:"bg-yellow-500",description:"Não recomendado para menores de 12 anos"},{label:"14+",value:"14+",level:14,color:"bg-orange-500",description:"Não recomendado para menores de 14 anos"},{label:"16+",value:"16+",level:16,color:"bg-red-500",description:"Não recomendado para menores de 16 anos"},{label:"18+",value:"18+",level:18,color:"bg-red-800",description:"Não recomendado para menores de 18 anos"}],kt=e=>({id:e.id,name:e.name,avatar:e.avatar_url||void 0,avatarColor:e.avatar_color||"bg-blue-600",isKids:e.is_kids||!1,language:"pt-BR",parentalRating:e.parental_rating||"18+",parentalPin:e.parental_pin||"",parentalEnabled:e.parental_enabled||!1,maturityLevel:e.maturity_level??18,autoPlayNext:!0}),At=async(e,t)=>{if(!Et.includes(e.type))return console.error(`[uploadAvatar] Tipo não permitido: ${e.type}`),null;if(e.size>5242880)return console.error(`[uploadAvatar] Arquivo muito grande: ${(e.size/1024/1024).toFixed(1)}MB`),null;try{const r=e.name.split(".").pop(),n=`${t}/${Date.now()}.${r}`;let{error:a}=await Y.storage.from("avatars").upload(n,e,{upsert:!0});if(a&&(a.message?.includes("not found")||a.message?.includes("Bucket")||404===a.statusCode)){const{error:t}=await Y.storage.createBucket("avatars",{public:!0,fileSizeLimit:5242880});if(t&&!t.message?.includes("already exists")){const t=`avatars_${n}`,{error:r}=await Y.storage.from("posters").upload(t,e,{upsert:!0});if(r)return null;const{data:a}=Y.storage.from("posters").getPublicUrl(t);return a.publicUrl}a=(await Y.storage.from("avatars").upload(n,e,{upsert:!0})).error}if(a)return null;const{data:s}=Y.storage.from("avatars").getPublicUrl(n);return s.publicUrl}catch{return null}},Tt=async e=>{try{const{data:t,error:r}=await Y.from("user_profiles").select("*").eq("user_id",e).order("created_at",{ascending:!0});return r?(console.error("Erro ao buscar perfis:",r),[]):(t||[]).map(kt)}catch(t){return console.error("Erro inesperado ao buscar perfis:",t),[]}},It=async(e,t)=>{try{let r=null;t.avatarFile&&(r=await At(t.avatarFile,e));const n=t.isKids||!1,a={user_id:e,name:t.name,avatar_url:r,avatar_color:t.avatarColor||St[Math.floor(Math.random()*St.length)],is_kids:n,parental_rating:t.parentalRating||(n?"L":"18+"),parental_pin:t.parentalPin||"",parental_enabled:!!t.parentalPin||n,maturity_level:t.maturityLevel??(n?0:18)},{data:s,error:o}=await Y.from("user_profiles").insert([a]).select().single();if(o)throw new Error(`Erro ao salvar perfil: ${o.message}`);return kt(s)}catch(r){throw console.error("Erro no serviço de perfil:",r),r}},Nt=async(e,t)=>{try{const{error:t}=await Y.from("user_profiles").delete().eq("id",e);return!t||(console.error("Erro ao deletar perfil:",t),!1)}catch{return!1}},Rt=async(e,t,r)=>{try{const n={};if(void 0!==r.name&&(n.name=r.name),void 0!==r.isKids&&(n.is_kids=r.isKids),void 0!==r.avatarColor&&(n.avatar_color=r.avatarColor),void 0!==r.parentalRating&&(n.parental_rating=r.parentalRating),void 0!==r.parentalPin&&(n.parental_pin=r.parentalPin),void 0!==r.parentalEnabled&&(n.parental_enabled=r.parentalEnabled),void 0!==r.maturityLevel&&(n.maturity_level=r.maturityLevel),r.avatarFile){const e=await At(r.avatarFile,t);e&&(n.avatar_url=e)}if(0===Object.keys(n).length)return null;const{data:a,error:s}=await Y.from("user_profiles").update(n).eq("id",e).select().single();if(s)throw new Error(`Erro ao atualizar: ${s.message}`);return kt(a)}catch(n){throw console.error("Erro ao atualizar perfil:",n),n}},Lt=(e,t)=>!e.parentalEnabled||!e.parentalPin||e.parentalPin===t;function Pt(e,t,r){if(e.size>=200&&!e.has(t)){const t=e.keys().next().value;void 0!==t&&e.delete(t)}e.set(t,r)}function Ct(e,t){const r=e.get(t);return void 0!==r&&(e.delete(t),e.set(t,r)),r}const Ot=new Map,Mt=new Map;function Dt(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim()}async function $t(e,t="movie",r){const n=`${t}_${r||""}_${Dt(e)}`,a=Ct(Ot,n);if(void 0!==a)return a;const s="movie"===t?"movies":"series";try{if(!e.trim()&&(!r||Number(r)<=0))return null;if(r&&Number(r)>0){const{data:e,error:t}=await Y.from(s).select("stream_url").eq("tmdb_id",Number(r)).not("stream_url","is",null).order("created_at",{ascending:!1}).range(0,0);if(t&&console.error("[StreamService] Erro query tmdb_id:",t),e&&e.length>0&&e[0].stream_url)return Pt(Ot,n,e[0].stream_url),e[0].stream_url;const{data:a,error:o}=await Y.from(s).select("stream_url").eq("tmdb_id",String(r)).not("stream_url","is",null).range(0,0);if(o&&console.error("[StreamService] Erro query tmdb_id str:",o),a&&a.length>0&&a[0].stream_url)return Pt(Ot,n,a[0].stream_url),a[0].stream_url}if(!e.trim())return Pt(Ot,n,null),null;const t=function(e){return e&&e.trim()?e.replace(/\\/g,"\\\\").replace(/%/g,"\\%").replace(/_/g,"\\_").trim():""}(e);if(!function(e){return!!e&&e.trim().length>=2}(t))return Pt(Ot,n,null),null;const{data:a,error:o}=await Y.from(s).select("stream_url, title").ilike("title",t).not("stream_url","is",null).order("created_at",{ascending:!1}).range(0,0);if(o&&console.error("[StreamService] Erro query title exact:",o),a&&a.length>0&&a[0].stream_url)return Pt(Ot,n,a[0].stream_url),a[0].stream_url;const{data:i,error:l}=await Y.from(s).select("stream_url, title").ilike("title",`%${t}%`).not("stream_url","is",null).order("created_at",{ascending:!1}).range(0,4);if(l&&console.error("[StreamService] Erro query partial:",l),!i||0===i.length){const e="movies"===s?"series":"movies",{data:r,error:a}=await Y.from(e).select("stream_url, title").ilike("title",`%${t}%`).not("stream_url","is",null).order("created_at",{ascending:!1}).range(0,0);if(a&&console.error("[StreamService] Erro query alt table:",a),r&&r.length>0&&r[0].stream_url)return Pt(Ot,n,r[0].stream_url),r[0].stream_url}if(i&&i.length>0){const t=Dt(e),r=i.sort((e,r)=>Math.abs(Dt(e.title).length-t.length)-Math.abs(Dt(r.title).length-t.length))[0];if(r&&r.stream_url)return Pt(Ot,n,r.stream_url),r.stream_url}return Pt(Ot,n,null),null}catch(o){return console.error(`[StreamService] EXCEPTION ao buscar stream_url para "${e}":`,o),null}}const Vt=async()=>{const{data:e,error:t}=await Y.from("catalog_settings").select("*").single();return t?(console.error("Error fetching catalog settings:",t),null):e},Bt=async e=>{const{data:t,error:r}=await Y.from("catalog_settings").update({...e,updated_at:(new Date).toISOString()}).eq("id",1).select().single();if(r)throw console.error("Error updating catalog settings:",r),r;return t},zt="data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" width="300" height="450" viewBox="0 0 300 450"><rect fill="#1a1a2e" width="300" height="450"/><rect fill="#252540" x="100" y="170" width="100" height="110" rx="8"/><circle fill="#3a3a5c" cx="150" cy="200" r="20"/><polygon fill="#3a3a5c" points="120,260 150,230 180,260" /><text fill="#555" font-family="Arial" font-size="12" text-anchor="middle" x="150" y="310">Sem Imagem</text></svg>');function qt(e){return e.poster&&e.poster.length>5&&!e.poster.includes("undefined")&&!e.poster.includes("null")?e.poster:e.backdrop&&e.backdrop.length>5&&!e.backdrop.includes("undefined")&&!e.backdrop.includes("null")?e.backdrop:zt}function Ft(e){const t=new Map,r=[];for(const n of e){let e;e=n.tmdb_id&&n.tmdb_id>0?`tmdb-${n.type}-${n.tmdb_id}`:`title-${n.type}-${(n.title||"").toLowerCase().trim()}`,e&&!t.has(e)&&(t.set(e,!0),r.push(n))}return r}function Ut(e){return!(!e||!e.id||!e.title||0===e.title.trim().length||!e.type||"movie"!==e.type&&"series"!==e.type)}function Gt(e){return Ft(function(e){const t=[/^temporada\s*\d+/i,/^season\s*\d+/i,/^s\d{1,2}$/i,/^t\d{1,2}\s*$/i,/^(\d+)[ªa]\s*temporada/i,/\btemporada\s*\d+$/i,/\bseason\s*\d+$/i,/^temp\s*\d+/i,/^s\d{1,2}\s*e\d+$/i,/^s\d{1,2}\s*·\s*e\d+/i];return e.filter(e=>{const r=(e.title||"").trim();if(!r)return!1;for(const n of t)if(n.test(r))return!1;if(e.group_title){const r=e.group_title.trim();for(const e of t)if(e.test(r))return!1}return!0})}(e.filter(Ut))).map(e=>({...e,poster:qt(e),description:e.description||"",rating:e.rating||"N/A",year:e.year||(new Date).getFullYear(),genre:Array.isArray(e.genre)?e.genre:[],stars:Array.isArray(e.stars)?e.stars:[]}))}function Yt(e,t){return e&&e.id&&("movie"!==t||e.title)&&("series"!==t||e.name||e.title)?{...e,poster_path:e.poster_path||null,backdrop_path:e.backdrop_path||null,overview:e.overview||"",vote_average:"number"==typeof e.vote_average?e.vote_average:0}:null}function Ht(e){if(!e)return null;try{const t=new URL(e).hostname.toLowerCase();if(t.includes("cdnapp")||t.includes("cdn.app"))return"CDN App";if(t.includes("xtream")||t.includes("xstream"))return"Xtream";if(t.includes("iptv"))return"IPTV";if(t.includes("m3u"))return"IPTV";if(t.includes("supabase"))return"Supabase";if(t.includes("cloudflare")||t.includes("r2.dev"))return"Cloudflare";if(t.includes("amazonaws")||t.includes("s3."))return"AWS S3";if(t.includes("storage.googleapis"))return"GCS";if(t.includes("blob.core.windows"))return"Azure";if(t.includes("youtube")||t.includes("youtu.be"))return"YouTube";if(t.includes("vimeo"))return"Vimeo";if(t.includes("dailymotion"))return"Dailymotion";if(t.includes("stream")||t.includes("vod"))return"VOD";if(t.includes("api."))return"API Stream";const r=t.split(".");return r.length>=2?r.slice(-2).join("."):"Desconhecido"}catch{return e.startsWith("/")||e.startsWith("./")?"Local":null}}const Jt=new Map;function Kt(e){const t=Jt.get(e);return t?Date.now()-t.timestamp>18e5?(Jt.delete(e),null):t.data:null}function Wt(e,t){if(Jt.size>=500){const e=Jt.keys().next().value;e&&Jt.delete(e)}Jt.set(e,{data:t,timestamp:Date.now()})}const Zt="https://api.themoviedb.org/3",Xt="https://image.tmdb.org/t/p",Qt={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkZGIxYmRmNmFhOTFiZGYzMzU3OTc4NTM4ODRiMGMxZCIsIm5iZiI6MTc1NzgyNzc4NS42NTI5OTk5LCJzdWIiOiI2OGM2NTJjOWExMzU0OWNiMTljOGZkNTQiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.MRN49ZNLLIcrO-jeU9lcJUetiI8fZ5rkJl0a81RAb5U"}};async function er(e,t,r=8e3){const n=new AbortController,a=setTimeout(()=>n.abort(),r);try{const r=await fetch(e,{...t,signal:n.signal});return clearTimeout(a),r}catch(s){throw clearTimeout(a),s}}async function tr(e,t){const r=`tmdb-id-${t}-${e}`,n=Kt(r);if(null!==n)return n;try{const n="movie"===t?"movie":"tv",a=await er(`${Zt}/${n}/${e}?language=pt-BR`,Qt);if(!a.ok)return a.status,null;const s=Yt(await a.json(),t);if(!s)return null;const o={poster:s.poster_path?`${Xt}/w500${s.poster_path}`:void 0,backdrop:s.backdrop_path?`${Xt}/original${s.backdrop_path}`:void 0,overview:s.overview};return Wt(r,o),o}catch{return null}}async function rr(e,t){const r=`tmdb-search-${t}-${e.toLowerCase().trim()}`,n=Kt(r);if(null!==n)return n;try{const n="movie"===t?"movie":"tv",a=await er(`${Zt}/search/${n}?query=${encodeURIComponent(e)}&language=pt-BR&page=1`,Qt);if(!a.ok)return null;const s=await a.json(),o=s.results?.[0];if(!o)return null;const i=Yt(o,t);if(!i)return null;const l={poster:i.poster_path?`${Xt}/w500${i.poster_path}`:void 0,backdrop:i.backdrop_path?`${Xt}/original${i.backdrop_path}`:void 0,tmdb_id:i.id,overview:i.overview};return Wt(r,l),l}catch{return null}}async function nr(e){const t=[];for(let r=0;r<e.length;r+=8){const n=e.slice(r,r+8);(await Promise.allSettled(n.map(async e=>{if(e.poster&&e.poster.includes("tmdb.org"))return e;let t=null;return t=e.tmdb_id&&e.tmdb_id>0?await tr(e.tmdb_id,e.type):await rr(e.title,e.type),t?{...e,poster:t.poster||e.poster,backdrop:t.backdrop||e.backdrop,tmdb_id:t.tmdb_id||e.tmdb_id,description:e.description||t.overview||""}:e}))).forEach(e=>{"fulfilled"===e.status&&t.push(e.value)})}return t}function ar(e){const t=new Map;return e.forEach(e=>{Array.isArray(e.genre)&&e.genre.forEach(r=>{const n=r.replace(/[♦️⭐✔️☠⚔🎬🔥✨💎🎄🎅]/gu,"").replace(/\|/g,"·").replace(/\s+/g," ").trim();!n||n.length<2||(t.has(n)||t.set(n,[]),t.get(n).push(e))})}),new Map(Array.from(t.entries()).filter(([e,t])=>t.length>=1).sort((e,t)=>t[1].length-e[1].length))}async function sr(){try{const e=await er(`${Zt}/trending/all/week?language=pt-BR`,Qt);return e.ok?(await e.json()).results.slice(0,15).map(e=>{const t=Yt(e,"movie"===e.media_type?"movie":"series");return t?{id:`tmdb-${t.media_type}-${t.id}`,tmdb_id:t.id,title:t.title||t.name,type:"movie"===t.media_type?"movie":"series",description:t.overview,rating:t.vote_average?.toFixed(1)||"N/A",year:new Date(t.release_date||t.first_air_date||"").getFullYear()||2025,genre:(t.genre_ids||[]).map(e=>ir(e)),backdrop:t.backdrop_path?`${Xt}/original${t.backdrop_path}`:"",poster:t.poster_path?`${Xt}/w500${t.poster_path}`:"",stars:[]}:null}).filter(e=>e&&e.backdrop&&e.poster):[]}catch(e){return[]}}const or={28:"Ação",12:"Aventura",16:"Animação",35:"Comédia",80:"Crime",99:"Documentário",18:"Drama",10751:"Família",14:"Fantasia",36:"História",27:"Terror",10402:"Música",9648:"Mistério",10749:"Romance",878:"Ficção Científica",10770:"Cinema TV",53:"Suspense",10752:"Guerra",37:"Faroeste",10759:"Ação & Aventura",10762:"Kids",10763:"Notícias",10764:"Reality",10765:"Ficção Científica & Fantasia",10766:"Novela",10767:"Talk Show",10768:"Guerra & Política"};function ir(e){return or[e]||"Outros"}async function lr(e,t){try{const r="movie"===e?"discover/movie":"discover/tv",n=new URLSearchParams({language:"pt-BR",sort_by:"popularity.desc",page:(t.page||1).toString(),"vote_count.gte":"50"});t.year&&("movie"===e?n.append("primary_release_year",t.year.toString()):n.append("first_air_date_year",t.year.toString())),t.genreId&&"Todos"!==t.genreId&&n.append("with_genres",t.genreId);const a=await er(`${Zt}/${r}?${n.toString()}`,Qt);return a.ok?(await a.json()).results.map(r=>{const n=Yt(r,e);return n?{id:`tmdb-${e}-${n.id}`,tmdb_id:n.id,title:n.title||n.name,type:e,description:n.overview,rating:n.vote_average?.toFixed(1)||"N/A",year:new Date(n.release_date||n.first_air_date||"").getFullYear()||t.year||2025,genre:(n.genre_ids||[]).map(e=>ir(e)),backdrop:n.backdrop_path?`${Xt}/original${n.backdrop_path}`:"",poster:n.poster_path?`${Xt}/w500${n.poster_path}`:"",status:"published",stars:[]}:null}).filter(e=>e&&e.poster):[]}catch(r){return[]}}const cr=t.createContext({movies:[],series:[],trendingMovies:[],trendingSeries:[],moviesByGenre:new Map,seriesByGenre:new Map,loading:!0,reload:()=>{}}),ur="redx-catalog-cache",dr=e=>{const t=new Set;return e.filter(e=>!e.tmdb_id||!t.has(e.tmdb_id)&&(t.add(e.tmdb_id),!0))},mr=e=>{const t=new Map;return e.forEach(e=>{Array.isArray(e.genre)&&e.genre.forEach(r=>{const n=r.trim();!n||n.length<2||(t.has(n)||t.set(n,[]),t.get(n).push(e))})}),new Map(Array.from(t.entries()).filter(([e,t])=>t.length>=2).sort((e,t)=>t[1].length-e[1].length))},pr=(e,t)=>{const r=parseFloat(String(e.rating||"0"));return parseFloat(String(t.rating||"0"))-r},fr=({children:e})=>{const[n,a]=t.useState([]),[s,o]=t.useState([]),[i,l]=t.useState([]),[c,u]=t.useState([]),[d,m]=t.useState(new Map),[p,f]=t.useState(new Map),[h,g]=t.useState(!0),y=t.useRef(null),v=t.useRef(!1),_=t.useCallback((e,t,r,n)=>{a(e),o(t);const s=r&&r.length>0?r:[...e].sort(pr).slice(0,20),i=n&&n.length>0?n:[...t].sort(pr).slice(0,20);s.length,i.length,s.length>0&&(!r||r.length),l(s),u(i),m(mr(e)),f(mr(t))},[]),b=t.useCallback(async()=>{const e={current:!0};v.current=!0;const t=setTimeout(()=>{v.current&&e.current&&(console.error("❌ [CatalogContext] Timeout de carga atingido (15s). Forçando interrupção."),g(!1),v.current=!1)},15e3);y.current=t;try{let e=!1;try{const t=localStorage.getItem(ur);if(t){const{movies:r,series:n,timestamp:a}=JSON.parse(t);if(r?.length>0&&Date.now()-a<18e5){const t=r.map(e=>({...e,type:"movie"})),a=n.map(e=>({...e,type:"series"}));_(t,a),g(!1),e=!0}}}catch(r){}const t=await Vt(),s=t?{minYear:t.min_year||2018,maxYear:t.max_year,genres:t.selected_genres,contentType:t.content_type}:{minYear:2018},{movies:o,series:i}=await Ee(s);let l=(o||[]).map(e=>({...e,type:"movie"})),c=(i||[]).map(e=>({...e,type:"series"}));if(l.length<5&&c.length<5&&s.minYear>2015){const e=await Ee({minYear:2015});l=(e.movies||[]).map(e=>({...e,type:"movie"})),c=(e.series||[]).map(e=>({...e,type:"series"})),l.length,c.length}if(0===l.length&&0===c.length){const e=await Ee({});l=(e.movies||[]).map(e=>({...e,type:"movie"})),c=(e.series||[]).map(e=>({...e,type:"series"}))}l=dr(l),c=dr(c);const u=Gt(l),d=Gt(c);u.length,d.length;try{const{trendingMovies:e,trendingSeries:t,enrichedMovies:r,enrichedSeries:a}=await async function(e,t){const r=e.filter(e=>e.stream_url&&e.stream_url.length>0),n=t.filter(e=>e.stream_url&&e.stream_url.length>0),a=e.filter(e=>!e.stream_url||0===e.stream_url.length),s=t.filter(e=>!e.stream_url||0===e.stream_url.length),o=a.slice(0,100),i=s.slice(0,100),[l,c,u]=await Promise.all([sr(),nr(o),nr(i)]),d=[...e,...t],m=new Map;d.forEach(e=>{e.stream_url&&m.set(e.title.toLowerCase().trim(),e)});const p=l.map(e=>{const t=m.get(e.title.toLowerCase().trim());return t?.stream_url?{...e,stream_url:t.stream_url}:e}),f=Ft(p.filter(e=>"movie"===e.type&&e.stream_url)),h=Ft(p.filter(e=>"series"===e.type&&e.stream_url)),g=f.length>0?f:Ft(p.filter(e=>"movie"===e.type)),y=h.length>0?h:Ft(p.filter(e=>"series"===e.type)),v=Ft([...r,...c,...a]),_=Ft([...n,...u,...s]);return{trendingMovies:g,trendingSeries:y,enrichedMovies:v,enrichedSeries:_,moviesByGenre:ar(v),seriesByGenre:ar(_)}}(u,d);r.length,a.length,e.length,_(r,a,e,t);try{const e={movies:r.slice(0,500),series:a.slice(0,500),timestamp:Date.now()};localStorage.setItem(ur,JSON.stringify(e))}catch(n){}}catch(a){console.error("❌ [CatalogContext] Erro ao enriquecer com TMDB. Usando dados puros do DB.",a),_(u,d,[],[])}}catch(s){console.error("❌ [CatalogContext] Erro crítico ao carregar catálogo:",s)}finally{g(!1),v.current=!1,t&&clearTimeout(t)}return()=>{e.current=!1}},[_]);t.useEffect(()=>{b()},[b]);const x=t.useMemo(()=>({movies:n,series:s,trendingMovies:i,trendingSeries:c,moviesByGenre:d,seriesByGenre:p,loading:h,reload:b}),[n,s,i,c,d,p,h,b]);return r.jsx(cr.Provider,{value:x,children:e})},hr={id:"default",logo_url:"https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg",primary_color:"#E50914",secondary_color:"#ffffff",background_color:"#0a0a0a"},gr=t.createContext({config:hr,updateConfig:()=>{},isLoading:!0}),yr=({children:e})=>{const[n,a]=t.useState(hr),[s,o]=t.useState(!0);t.useEffect(()=>{i()},[]);const i=async()=>{try{const e=await async function(){const{data:e,error:t}=await Y.from("app_config").select("*").single();return t||!e?{id:"default",logo_url:"https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg",primary_color:"#E50914",secondary_color:"#ffffff",background_color:"#0a0a0a"}:e}();e&&(a(e),l(e))}catch(e){console.error("Erro ao carregar config:",e)}finally{o(!1)}},l=e=>{const t=document.documentElement;t.style.setProperty("--primary-color",e.primary_color),t.style.setProperty("--background-color",e.background_color)};return r.jsx(gr.Provider,{value:{config:n,updateConfig:e=>{const t={...n,...e};a(t),l(t)},isLoading:s},children:e})},vr=l.lazy(()=>_(()=>import("./Profiles-xbkp2nvu.js"),__vite__mapDeps([0,1,2,3]))),_r=l.lazy(()=>_(()=>import("./Home-C6YIrZ2t.js"),__vite__mapDeps([4,1,5,6,7,8,9,2,3]))),br=l.lazy(()=>_(()=>import("./Movies-DST92C0L.js"),__vite__mapDeps([10,1,6,7,8,9,5,2,3]))),xr=l.lazy(()=>_(()=>import("./Series-BTrvRjVf.js"),__vite__mapDeps([11,1,6,7,8,9,5,2,3]))),wr=l.lazy(()=>_(()=>import("./Kids-BHcgRO6g.js"),__vite__mapDeps([12,1,5,6,7,8,2,3]))),Er=l.lazy(()=>_(()=>import("./MyList-BYziRIhD.js"),__vite__mapDeps([13,1,6,7,8,2,3]))),Sr=l.lazy(()=>_(()=>import("./LiveTV-D1tqHvT7.js"),__vite__mapDeps([14,1,2,3]))),jr=l.lazy(()=>_(()=>import("./Details-D0xZbV9t.js"),__vite__mapDeps([15,1,7,16,8,2,3]))),kr=l.lazy(()=>_(()=>import("./Player-L2g1hAFf.js"),__vite__mapDeps([17,1,2,8,7,3]))),Ar=l.lazy(()=>_(()=>import("./Settings-B1bvAbWA.js"),__vite__mapDeps([18,1,16,2,3]))),Tr=l.lazy(()=>_(()=>import("./Search-CFn_IE-_.js"),__vite__mapDeps([19,1,6,7,8,2,3]))),Ir=l.lazy(()=>_(()=>import("./Dashboard-CisfteN2.js"),__vite__mapDeps([20,1,21,2,22,23,3]))),Nr=l.lazy(()=>_(()=>import("./Subscribers-BGjJtXK9.js"),__vite__mapDeps([24,1,21,2,22,3]))),Rr=l.lazy(()=>_(()=>import("./Finance-bWY15LLV.js"),__vite__mapDeps([25,1,21,2,3]))),Lr=l.lazy(()=>_(()=>import("./IPTV-4A3EyQYU.js"),__vite__mapDeps([26,1,21,2,22,3]))),Pr=l.lazy(()=>_(()=>import("./VOD-DUas3Kpg.js"),__vite__mapDeps([27,1,21,2,7,3]))),Cr=l.lazy(()=>_(()=>import("./Resellers-AvavvKEh.js"),__vite__mapDeps([28,1,21,2,22,3]))),Or=l.lazy(()=>_(()=>import("./Security-CQukJ4Qx.js"),__vite__mapDeps([29,1,21,2,22,3]))),Mr=l.lazy(()=>_(()=>import("./Settings-COWylqCr.js"),__vite__mapDeps([30,1,21,2,22,3]))),Dr=l.lazy(()=>_(()=>import("./CatalogControl-YhS4mwHo.js"),__vite__mapDeps([31,1,2,3]))),$r=l.lazy(()=>_(()=>import("./Ingestion-iYACR4VM.js"),__vite__mapDeps([32,1,21,2,3]))),Vr=l.lazy(()=>_(()=>import("./StreamTester-DhbPVkiM.js"),__vite__mapDeps([33,1,2,3]))),Br=l.lazy(()=>_(()=>import("./P2PSettings-BFhQN31h.js"),__vite__mapDeps([34,1]))),zr=()=>r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"radial-gradient(ellipse at center, rgba(229,9,20,0.06) 0%, rgba(11,11,15,0.97) 60%, #0B0B0F 100%)"},children:r.jsxs("div",{className:"flex flex-col items-center gap-5",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("svg",{className:"w-20 h-20 animate-spin",style:{animationDuration:"2.5s"},viewBox:"0 0 80 80",children:[r.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"rgba(229,9,20,0.15)",strokeWidth:"2"}),r.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"#E50914",strokeWidth:"2.5",strokeLinecap:"round",strokeDasharray:"60 170"})]}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("img",{src:"/logored.png",alt:"Redflix",className:"h-8 w-auto object-contain opacity-80",style:{animation:"pulse 2s ease-in-out infinite"}})})]}),r.jsx("p",{className:"text-[10px] font-semibold uppercase tracking-[0.4em] text-white/25",children:"Carregando..."})]})}),qr=()=>{const[e,n]=t.useState(b.LOGIN),[a,s]=t.useState(null),[o,i]=t.useState(null),{movies:c,series:u,trendingMovies:d,trendingSeries:m,moviesByGenre:f,seriesByGenre:h,loading:g,reload:y}=t.useContext(cr),[v,_]=t.useState(b.HOME),[x,w]=t.useState(null),[E,k]=t.useState(!1);p();const{savePosition:T,restorePosition:I,focusToFirstRow:N,setPosition:R,pushFocusTrap:L,popFocusTrap:C}=P(),{user:O,loading:M}=je();t.useEffect(()=>{!M&&O&&e===b.LOGIN&&n(b.PROFILES)},[M,O,e]);const D=[b.LOGIN,b.PLANS,b.PROFILES,b.HOME,b.MOVIES,b.SERIES,b.KIDS,b.MY_LIST,b.LIVE,b.SEARCH],$=[b.HOME,b.MOVIES,b.SERIES,b.KIDS,b.MY_LIST,b.SEARCH];t.useEffect(()=>{if(!D.includes(e))return;const t=setTimeout(()=>{$.includes(e)?R(1,0):N()},200);return()=>clearTimeout(t)},[e,N,R]);const V=(t,r=null)=>{r&&i(r),_(e),n(t)},B=async t=>{if(a&&!((e,t=0)=>{let r=0;if("number"==typeof t)r=t;else{const e=String(t).toUpperCase().replace(/[^A-Z0-9]/g,"");r=["L","G","0","SC","TVY","TVG"].includes(e)?0:e.includes("10")||e.includes("PG")?10:e.includes("12")||e.includes("PG13")?12:e.includes("14")?14:e.includes("16")?16:e.includes("18")||e.includes("TVMA")||e.includes("R")?18:0}const n=jt.find(t=>t.value===e.parentalRating);return r<=(n?n.level:18)})(a,t.rating))return t.title,t.rating,a.name,j(),void alert(`Conteúdo bloqueado pela classificação indicativa (${t.rating||"N/A"}).`);if(t.title,t.stream_url,t.tmdb_id,t.stream_url)return t.stream_url.substring(0,80),T("player-return"),_(e),i(t),void n(b.PLAYER);t.title;const r=await $t(t.title,t.type,t.tmdb_id);if(r)return r.substring(0,80),T("player-return"),_(e),i({...t,stream_url:r}),void n(b.PLAYER);t.title,T("player-return"),_(e),i(t),n(b.PLAYER)};t.useEffect(()=>{e===b.PLAYER&&o&&"series"===o.type?(async()=>{if(!o.tmdb_id)return;const e=o.season_number||1,t=o.episode_number||1,r=await async function(e,t,r,n){const a=`next_${e}_s${t}e${r}`,s=Ct(Mt,a);if(void 0!==s)return s;try{const{data:s}=await Y.from("series").select("id").eq("tmdb_id",Number(e)||String(e)).limit(1);if(!s?.length)return Pt(Mt,a,null),null;const o=s[0].id,{data:i}=await Y.from("seasons").select("id, season_number").eq("series_id",o).order("season_number",{ascending:!0});if(!i?.length)return Pt(Mt,a,null),null;const l=i.find(e=>e.season_number===t);if(!l)return Pt(Mt,a,null),null;const{data:c}=await Y.from("episodes").select("id, title, episode_number, stream_url").eq("season_id",l.id).eq("episode_number",r+1).not("stream_url","is",null).limit(1);let u=c?.[0]||null,d=t,m=r+1;if(!u){const e=i.find(e=>e.season_number>t);if(e){const{data:t}=await Y.from("episodes").select("id, title, episode_number, stream_url").eq("season_id",e.id).order("episode_number",{ascending:!0}).not("stream_url","is",null).limit(1);t?.length&&(u=t[0],d=e.season_number,m=u.episode_number)}}if(!u||!u.stream_url)return Pt(Mt,a,null),null;let p=0;if(n){const{data:t}=await Y.from("watch_progress").select("progress_seconds").eq("user_id",n).eq("tmdb_id",String(e)).eq("season_number",d).eq("episode_number",m).maybeSingle();p=t?.progress_seconds||0}const f={title:u.title||`Episódio ${m}`,season:d,episode:m,stream_url:u.stream_url,savedProgress:p};return Pt(Mt,a,f),f}catch(o){return console.error(`[StreamService] Erro getNextEpisode S${t}E${r}:`,o),null}}(o.tmdb_id,e,t,O?.id);w(r?{title:r.title,season:r.season,episode:r.episode,stream_url:r.stream_url}:null)})():w(null)},[e,o,O?.id]);const z=()=>{if(!x||!o)return;const e={...o,title:x.title,stream_url:x.stream_url||"",season_number:x.season,episode_number:x.episode};w(null),i(e)},q=()=>{n(b.PROFILES)},F=e=>{s(e),n(e.isKids?b.KIDS:b.HOME)},U=()=>{const e=a?.isKids?b.KIDS:b.HOME;n(e)},G=()=>{switch(j(),e){case b.DETAILS:case b.PLAYER:U();break;case b.MOVIES:case b.SERIES:case b.LIVE:case b.MY_LIST:case b.KIDS:case b.SETTINGS:case b.SEARCH:case b.ADMIN:n(b.HOME),k(!1);break;case b.HOME:E?window.__canExitApp=!0:k(!0);break;case b.PROFILES:n(b.LOGIN)}};t.useEffect(()=>{const t=()=>{A(),window.removeEventListener("keydown",t),window.removeEventListener("click",t)};window.addEventListener("keydown",t,{once:!0}),window.addEventListener("click",t,{once:!0}),window.__canExitApp=!1;const r=t=>{if("Escape"===t.key||"Backspace"===t.key){if(t.defaultPrevented)return;const r=t.target?.tagName;if("INPUT"===r||"TEXTAREA"===r)return;if(e===b.LIVE||e===b.PLAYER)return;t.preventDefault(),G()}};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e,a,E]),t.useEffect(()=>{e!==b.HOME&&k(!1)},[e]),t.useEffect(()=>{if(E)return L("exit-confirm-modal"),()=>C()},[E,L,C]);const H=![b.LOGIN,b.PLANS,b.PROFILES,b.PLAYER,b.DETAILS,b.ADMIN,b.SETTINGS,b.LIVE].includes(e),J=o?o.poster:d.length>0?d[0]?.backdrop||d[0]?.poster:e===b.MOVIES?c[0]?.poster:e===b.SERIES?u[0]?.poster:c[0]?.poster||u[0]?.poster||"";return r.jsxs("div",{className:"relative min-h-screen w-full overflow-x-hidden overflow-y-auto flex flex-col items-center text-white",children:[r.jsx("div",{className:"fixed inset-0 transition-opacity duration-1000 ease-in-out -z-10",style:{backgroundImage:J?`url(${J})`:"none",backgroundSize:"cover",backgroundPosition:"center",filter:e===b.PLAYER?"none":"brightness(0.3)",opacity:J?1:0}}),r.jsx("div",{className:"fixed inset-0 bg-linear-to-b from-transparent via-[#0B0B0F]/40 to-[#0B0B0F] pointer-events-none -z-10"}),H&&r.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 flex items-center pointer-events-none bg-linear-to-b from-black/80 to-transparent pt-4 pb-12 px-12",children:r.jsx("div",{className:"w-full pointer-events-auto",children:r.jsx(Ke,{currentPage:e,onNavigate:V,profile:a,onProfileClick:()=>n(b.SETTINGS)})})}),r.jsx("main",{className:"w-full flex-1 flex flex-col items-center "+([b.LIVE,b.DETAILS,b.SETTINGS].includes(e)?"p-0 pt-0":"p-0"),children:r.jsx(l.Suspense,{fallback:r.jsx(zr,{}),children:(()=>{if(g&&e!==b.LOGIN)return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-[#0B0B0F]",children:r.jsxs("div",{className:"flex flex-col items-center gap-6",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("svg",{className:"w-24 h-24 animate-spin",style:{animationDuration:"2s"},viewBox:"0 0 80 80",children:[r.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"rgba(229,9,20,0.1)",strokeWidth:"3"}),r.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"#E50914",strokeWidth:"4",strokeLinecap:"round",strokeDasharray:"50 180"})]}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("img",{src:"/logored.png",alt:"Redflix",className:"h-10 w-auto object-contain"})})]}),r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("p",{className:"text-sm font-bold uppercase tracking-[0.3em] text-white animate-pulse",children:"Sintonizando Rede"}),r.jsx("p",{className:"text-[10px] uppercase tracking-[0.2em] text-white/40",children:"Iniciando RedX Spatial Streaming"})]})]})});switch(e){case b.LOGIN:return r.jsx(Ae,{onLogin:q,onAdminAccess:()=>{window.location.href="/admin/vod"}});case b.PLANS:case b.PROFILES:return r.jsx(vr,{onSelect:F});case b.HOME:return r.jsx(_r,{movies:c,series:u,trendingMovies:d,trendingSeries:m,moviesByGenre:f,seriesByGenre:h,onSelectMedia:e=>V(b.DETAILS,e),onPlayMedia:B,onRetry:y});case b.MOVIES:return r.jsx(br,{movies:c,moviesByGenre:f,trendingMovies:d,onSelectMedia:e=>V(b.DETAILS,e),onPlayMedia:B});case b.SERIES:return r.jsx(xr,{series:u,seriesByGenre:h,trendingSeries:m,onSelectMedia:e=>V(b.DETAILS,e),onPlayMedia:B});case b.KIDS:return r.jsx(wr,{movies:c,series:u,onSelectMedia:e=>V(b.DETAILS,e),onPlayMedia:B});case b.MY_LIST:return r.jsx(Er,{onSelectMedia:e=>V(b.DETAILS,e),onPlayMedia:B});case b.LIVE:return r.jsx(Sr,{onBack:G});case b.DETAILS:return r.jsx(jr,{media:o,onPlay:e=>B(e||o),onBack:U});case b.PLAYER:return r.jsx(kr,{media:o,onClose:()=>{n(b.HOME),w(null),I("player-return")},nextEpisode:x,onPlayNext:z});case b.ADMIN:return r.jsx(Ir,{});case b.SETTINGS:return r.jsx(Ar,{onBack:()=>n(b.HOME)});case b.SEARCH:return r.jsx(Tr,{onSelectMedia:e=>V(b.DETAILS,e),onPlayMedia:B});default:return r.jsx(_r,{movies:c,series:u,trendingMovies:d,trendingSeries:m,moviesByGenre:f,seriesByGenre:h,onSelectMedia:e=>V(b.DETAILS,e)})}})()})}),E&&r.jsx("div",{id:"exit-confirm-modal",className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/85",role:"dialog","aria-modal":"true","aria-labelledby":"exit-confirm-title",onKeyDown:e=>{e.stopPropagation()},ref:e=>{if(e){const t=e.querySelector("[data-nav-item]");t?.focus()}},children:r.jsxs("div",{className:"bg-[#121217] border border-white/10 rounded-3xl p-8 max-w-sm mx-4 shadow-2xl","data-nav-row":0,children:[r.jsx("p",{id:"exit-confirm-title",className:"text-lg font-bold text-white mb-6 text-center",children:"Tem certeza que deseja sair?"}),r.jsx("p",{className:"text-sm text-white/50 mb-6 text-center",children:"Pressione Voltar novamente ou selecione uma opção"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{"data-nav-item":!0,"data-nav-col":0,onClick:()=>{S(),k(!1)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),S(),k(!1))},tabIndex:0,className:"flex-1 py-3 px-4 rounded-xl bg-white/10 hover:bg-white/20 text-white font-bold transition-colors focus:outline-none focus:ring-2 focus:ring-white",children:"Não"}),r.jsx("button",{"data-nav-item":!0,"data-nav-col":1,onClick:()=>{S(),k(!1),window.__canExitApp=!0},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),S(),k(!1),window.__canExitApp=!0)},tabIndex:0,className:"flex-1 py-3 px-4 rounded-xl bg-red-600 hover:bg-red-500 text-white font-bold transition-colors focus:outline-none focus:ring-2 focus:ring-red-500",children:"Sim"})]})]})})]})},Fr=()=>r.jsx(z,{children:r.jsx(qr,{})}),Ur=()=>r.jsx(yr,{children:r.jsx(ke,{children:r.jsx(fr,{children:r.jsx(u,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:r.jsxs(d,{children:[r.jsx(m,{path:"/admin",element:r.jsx(wt,{children:r.jsx(l.Suspense,{fallback:r.jsx(zr,{}),children:r.jsx(Ir,{})})})}),r.jsx(m,{path:"/admin/subscribers",element:r.jsx(wt,{children:r.jsx(l.Suspense,{fallback:r.jsx(zr,{}),children:r.jsx(Nr,{})})})}),r.jsx(m,{path:"/admin/finance",element:r.jsx(wt,{children:r.jsx(l.Suspense,{fallback:r.jsx(zr,{}),children:r.jsx(Rr,{})})})}),r.jsx(m,{path:"/admin/iptv",element:r.jsx(wt,{children:r.jsx(l.Suspense,{fallback:r.jsx(zr,{}),children:r.jsx(Lr,{})})})}),r.jsx(m,{path:"/admin/vod",element:r.jsx(wt,{children:r.jsx(l.Suspense,{fallback:r.jsx(zr,{}),children:r.jsx(Pr,{})})})}),r.jsx(m,{path:"/admin/resellers",element:r.jsx(wt,{children:r.jsx(l.Suspense,{fallback:r.jsx(zr,{}),children:r.jsx(Cr,{})})})}),r.jsx(m,{path:"/admin/security",element:r.jsx(wt,{children:r.jsx(l.Suspense,{fallback:r.jsx(zr,{}),children:r.jsx(Or,{})})})}),r.jsx(m,{path:"/admin/settings",element:r.jsx(wt,{children:r.jsx(l.Suspense,{fallback:r.jsx(zr,{}),children:r.jsx(Mr,{})})})}),r.jsx(m,{path:"/admin/catalog",element:r.jsx(wt,{children:r.jsx(l.Suspense,{fallback:r.jsx(zr,{}),children:r.jsx(Dr,{})})})}),r.jsx(m,{path:"/admin/ingestion",element:r.jsx(wt,{children:r.jsx(l.Suspense,{fallback:r.jsx(zr,{}),children:r.jsx($r,{})})})}),r.jsx(m,{path:"/admin/stream-test",element:r.jsx(wt,{children:r.jsx(l.Suspense,{fallback:r.jsx(zr,{}),children:r.jsx(Vr,{})})})}),r.jsx(m,{path:"/admin/p2p",element:r.jsx(wt,{children:r.jsx(l.Suspense,{fallback:r.jsx(zr,{}),children:r.jsx(Br,{})})})}),r.jsx(m,{path:"/*",element:r.jsx(Fr,{})})]})})})})}),Gr=document.getElementById("root");if(!Gr)throw new Error("Could not find root element to mount to");y.createRoot(Gr).render(r.jsx(l.StrictMode,{children:r.jsx(Ur,{})}));export{St as A,ae as B,te as C,re as D,Y as E,vt as F,ve as G,ye as H,_e as I,ge as J,Ht as K,ue as L,de as M,fe as N,be as O,jt as P,le as Q,Be as R,ce as S,me as T,pe as U,Vt as V,Bt as W,lr as X,P as a,S as b,j as c,Rt as d,It as e,Nt as f,Tt as g,J as h,K as i,$e as j,Ye as k,Ft as l,qt as m,zt as n,W as o,E as p,$t as q,Ve as r,he as s,X as t,je as u,Lt as v,Q as w,ee as x,ne as y,Z as z};
